(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1085:(e,t,s)=>{"use strict";s.d(t,{Fm:()=>u,Qs:()=>p,cj:()=>r,h:()=>d,qp:()=>m});var n=s(5155);s(2115);var a=s(5452),l=s(4416),o=s(3999);function r(e){let{...t}=e;return(0,n.jsx)(a.bL,{"data-slot":"sheet",...t})}function i(e){let{...t}=e;return(0,n.jsx)(a.ZL,{"data-slot":"sheet-portal",...t})}function c(e){let{className:t,...s}=e;return(0,n.jsx)(a.hJ,{"data-slot":"sheet-overlay",className:(0,o.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s})}function d(e){let{className:t,children:s,side:r="right",...d}=e;return(0,n.jsxs)(i,{children:[(0,n.jsx)(c,{}),(0,n.jsxs)(a.UC,{"data-slot":"sheet-content",className:(0,o.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500","right"===r&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm","left"===r&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm","top"===r&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b","bottom"===r&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",t),...d,children:[s,(0,n.jsxs)(a.bm,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[(0,n.jsx)(l.A,{className:"size-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function u(e){let{className:t,...s}=e;return(0,n.jsx)("div",{"data-slot":"sheet-header",className:(0,o.cn)("flex flex-col gap-1.5 p-4",t),...s})}function m(e){let{className:t,...s}=e;return(0,n.jsx)(a.hE,{"data-slot":"sheet-title",className:(0,o.cn)("text-foreground font-semibold",t),...s})}function p(e){let{className:t,...s}=e;return(0,n.jsx)(a.VY,{"data-slot":"sheet-description",className:(0,o.cn)("text-muted-foreground text-sm",t),...s})}},2815:(e,t,s)=>{Promise.resolve().then(s.bind(s,7406))},6037:(e,t,s)=>{"use strict";s.d(t,{W:()=>l});var n=s(5155);s(2115);var a=s(3999);function l(e){let{className:t}=e;return(0,n.jsx)("div",{className:(0,a.cn)("border-border h-[1px] w-full border-t border-dashed bg-transparent",{["".concat(t)]:void 0!==t})})}},6705:(e,t,s)=>{"use strict";s.d(t,{WebSocketProvider:()=>c,h:()=>d});var n=s(5155),a=s(2115),l=s(2379);let o=(0,a.createContext)(null),r=null,i=null;function c(e){let{children:t}=e,s=(0,a.useRef)(r),c=(0,a.useRef)(null),[d,u]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let e=()=>{var t;if((null==(t=s.current)?void 0:t.readyState)===WebSocket.OPEN)return;let n=new WebSocket((0,l.$0)("/ws/logs"));s.current=n,r=n,n.onopen=()=>{console.log("WebSocket connected"),u(!0),c.current&&(clearTimeout(c.current),c.current=null)},n.onmessage=e=>{try{let t=JSON.parse(e.data);"log"===t.type&&i&&i(t.payload,t.operation)}catch(e){console.error("Failed to parse WebSocket message:",e)}},n.onclose=()=>{console.log("WebSocket disconnected, attempting to reconnect..."),u(!1),c.current=setTimeout(e,5e3)},n.onerror=e=>{u(!1),n.close()}};return e(),()=>{c.current&&(clearTimeout(c.current),c.current=null)}},[]),(0,n.jsx)(o.Provider,{value:{isConnected:d,ws:s,setMessageHandler:e=>{i=e}},children:t})}function d(){let e=(0,a.useContext)(o);if(!e)throw Error("useWebSocket must be used within a WebSocketProvider");return e}},7406:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>ej});var n=s(5155),a=s(2384),l=s(8145),o=s(7168),r=s(1492),i=s(7783),c=s(4432);let d=()=>[{accessorKey:"timestamp",header:e=>{let{column:t}=e;return(0,n.jsxs)(o.$,{variant:"ghost",onClick:()=>t.toggleSorting("asc"===t.getIsSorted()),children:["Time",(0,n.jsx)(r.A,{className:"ml-2 h-4 w-4"})]})},cell:e=>{let{row:t}=e,s=t.original.timestamp;return(0,n.jsx)("div",{className:"font-mono text-sm",children:new Date(s).toLocaleString()})}},{accessorKey:"provider",header:"Provider",cell:e=>{let{row:t}=e,s=t.original.provider;return(0,n.jsxs)(l.E,{variant:"secondary",className:"uppercase",children:[(0,c.FO)(s,{size:"sm"}),s]})}},{accessorKey:"model",header:"Model",cell:e=>{let{row:t}=e;return(0,n.jsx)("div",{className:"max-w-[240px] truncate text-sm font-medium",children:t.original.model})}},{accessorKey:"status",header:"Status",cell:e=>{let{row:t}=e,s=t.original.status;return(0,n.jsx)(l.E,{variant:"secondary",className:i.Ez[s],children:s})}},{accessorKey:"latency",header:e=>{let{column:t}=e;return(0,n.jsxs)(o.$,{variant:"ghost",onClick:()=>t.toggleSorting("asc"===t.getIsSorted()),children:["Latency",(0,n.jsx)(r.A,{className:"ml-2 h-4 w-4"})]})},cell:e=>{let{row:t}=e,s=t.original.latency;return(0,n.jsx)("div",{className:"font-mono text-sm",children:s?"".concat(s.toLocaleString(),"ms"):"N/A"})}},{accessorKey:"token_usage.total_tokens",header:e=>{let{column:t}=e;return(0,n.jsxs)(o.$,{variant:"ghost",onClick:()=>t.toggleSorting("asc"===t.getIsSorted()),children:["Tokens",(0,n.jsx)(r.A,{className:"ml-2 h-4 w-4"})]})},cell:e=>{let{row:t}=e,s=t.original.token_usage;return s?(0,n.jsxs)("div",{className:"text-sm",children:[(0,n.jsx)("div",{className:"font-mono",children:s.total_tokens.toLocaleString()}),(0,n.jsxs)("div",{className:"text-muted-foreground text-xs",children:[s.prompt_tokens,"+",s.completion_tokens]})]}):(0,n.jsx)("div",{className:"font-mono text-sm",children:"N/A"})}},{id:"request_type",header:"Type",cell:e=>{let{row:t}=e;return(0,n.jsx)(l.E,{variant:"outline",className:"".concat(i.wf[t.original.object]," text-xs"),children:i.tJ[t.original.object]})}}];var u=s(5784),m=s(4964),p=s(2379),h=s(4357),x=s(1243),g=s(2115),f=s(6671),j=s(9026),v=s(3999),y=s(1154),N=s(1362);let b=(0,s(5028).default)(()=>s.e(983).then(s.bind(s,1364)).then(e=>e.default),{loadableGenerated:{webpack:()=>[1364]},ssr:!1,loading:()=>(0,n.jsx)(y.A,{className:"h-4 w-4 animate-spin p-4"})});function w(e){var t,s,a,l,o,r,i,c,d,u,m,p,h,x,f,j;let{className:w,lang:_,code:k,onChange:S,height:C,minHeight:A}=e,L=(0,g.useRef)(null),[H,z]=(0,g.useState)(!1),[T,M]=(0,g.useState)(e.height||e.minHeight||200);(0,g.useEffect)(()=>{z(!0)},[]);let{theme:B,systemTheme:E}=(0,N.D)(),O={lineNumbers:(null==(t=e.options)?void 0:t.lineNumbers)||"off",readOnly:e.readonly,scrollBeyondLastLine:null!=(m=null==(s=e.options)?void 0:s.scrollBeyondLastLine)&&m,minimap:{enabled:!1},contextmenu:!1,fontFamily:"var(--font-geist-mono)",fontSize:e.fontSize||12.5,padding:{top:2,bottom:2},wordWrap:e.wrap?"on":"off",folding:null!=(p=null==(a=e.options)?void 0:a.collapsibleBlocks)&&p,glyphMargin:!1,lineNumbersMinChars:null!=(h=null==(l=e.options)?void 0:l.lineNumbersMinChars)?h:4,overviewRulerLanes:null!=(x=null==(o=e.options)?void 0:o.overviewRulerLanes)?x:0,renderLineHighlight:"none",cursorStyle:"line",cursorBlinking:"smooth",scrollbar:{vertical:(null==(r=e.options)?void 0:r.showVerticalScrollbar)?"auto":"hidden",horizontal:(null==(i=e.options)?void 0:i.showHorizontalScrollbar)?"auto":"hidden",alwaysConsumeMouseWheel:null!=(f=null==(c=e.options)?void 0:c.alwaysConsumeMouseWheel)&&f},guides:{indentation:null==(j=null==(d=e.options)?void 0:d.showIndentLines)||j},hover:{enabled:!(null==(u=e.options)?void 0:u.disableHover)},wordBasedSuggestions:"off",...e.options};return H?(0,n.jsx)("div",{id:e.id,ref:L,className:(0,v.cn)("group relative h-full w-full",e.containerClassName),onBlur:e.onBlur,children:(0,n.jsx)(b,{height:T,width:e.width,language:_||"javascript",value:k||"",theme:"dark"===B||"system"===B&&"dark"===E?"custom-dark":"light",options:O,loading:(0,n.jsx)(y.A,{className:"h-4 w-4 animate-spin"}),onChange:e=>{S&&S(e||"")},onMount:(t,s)=>{if(e.autoFocus&&t.focus(),e.shouldAdjustInitialHeight||e.autoResize){let s=()=>{try{let s=t.getContentHeight();e.minHeight&&s<e.minHeight&&(s=e.minHeight),e.maxHeight&&s>e.maxHeight&&(s=e.maxHeight),M(s+15),t.layout()}catch(e){console.warn("Error updating editor height:",e)}};if(setTimeout(s,100),e.autoResize){let e=t.getModel();e&&e.onDidChangeContent(()=>{requestAnimationFrame(s)})}}if(e.autoFormat)try{var n;null==(n=t.getAction("editor.action.formatDocument"))||n.run()}catch(e){console.warn("Auto-format failed:",e)}},className:(0,v.cn)("code text-md w-full bg-transparent outline-none ring-offset-transparent",w),beforeMount:e=>{window.MonacoEnvironment={getWorker:()=>({postMessage:()=>{},terminate:()=>{},addEventListener:()=>{},removeEventListener:()=>{},dispatchEvent:()=>!1,onerror:null,onmessage:null,onmessageerror:null})},e.editor.defineTheme("custom-dark",{base:"vs-dark",inherit:!0,rules:[],colors:{"editor.background":"#00000000",focusBorder:"#00000000","editor.lineHighlightBorder":"#00000000","editor.selectionHighlightBorder":"#00000000","editorWidget.border":"#00000000","editorOverviewRuler.border":"#00000000"}})}})}):(0,n.jsx)("div",{className:(0,v.cn)("group relative flex h-24 w-full items-center justify-center",e.containerClassName),children:(0,n.jsx)(y.A,{className:"h-4 w-4 animate-spin"})})}let _={scrollBeyondLastLine:!1,minimap:{enabled:!1},lineNumbers:"off",folding:!1,lineDecorationsWidth:0,lineNumbersMinChars:0,glyphMargin:!1};function k(e){let{code:t,language:s,onLanguageChange:a,showLanguageSelect:l=!1,readonly:r=!0}=e;return(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsxs)("div",{className:"absolute right-4 top-4 z-10 flex items-center gap-2",children:[l&&a&&(0,n.jsxs)(u.l6,{value:s,onValueChange:a,children:[(0,n.jsx)(u.bq,{className:"h-8 w-fit text-xs",children:(0,n.jsx)(u.yv,{})}),(0,n.jsxs)(u.gC,{children:[(0,n.jsx)(u.eb,{className:"text-xs",value:"python",children:"Python"}),(0,n.jsx)(u.eb,{className:"text-xs",value:"typescript",children:"TypeScript"})]})]}),(0,n.jsx)(o.$,{variant:"ghost",size:"icon",onClick:()=>{navigator.clipboard.writeText(t),f.o.success("Copied to clipboard")},children:(0,n.jsx)(h.A,{className:"size-4"})})]}),(0,n.jsx)(w,{className:"w-full",code:t,lang:s,readonly:r,height:300,fontSize:14,options:_})]})}function S(e){let{isSocketConnected:t,error:s}=e,[a,l]=(0,g.useState)("python"),o=(0,g.useMemo)(()=>{let e=(0,p.XO)();return{curl:"curl -X POST ".concat(e,'/v1/chat/completions \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "model": "openai/gpt-4o-mini",\n    "messages": [\n      {"role": "user", "content": "Hello!"}\n    ]\n  }\''),sdk:{openai:{python:'import openai\n\nclient = openai.OpenAI(\n    base_url="'.concat(e,'/openai",\n    api_key="dummy-api-key" # Handled by Bifrost\n)\n\nresponse = client.chat.completions.create(\n    model="gpt-4o-mini", # or "provider/model" for other providers (anthropic/claude-3-sonnet)\n    messages=[{"role": "user", "content": "Hello!"}]\n)'),typescript:'import OpenAI from "openai";\n\nconst openai = new OpenAI({\n  baseURL: "'.concat(e,'/openai",\n  apiKey: "dummy-api-key", // Handled by Bifrost\n});\n\nconst response = await openai.chat.completions.create({\n  model: "gpt-4o-mini", // or "provider/model" for other providers (anthropic/claude-3-sonnet)\n  messages: [{ role: "user", content: "Hello!" }],\n});')},anthropic:{python:'import anthropic\n\nclient = anthropic.Anthropic(\n    base_url="'.concat(e,'/anthropic",\n    api_key="dummy-api-key" # Handled by Bifrost\n)\n\nresponse = client.messages.create(\n    model="claude-3-sonnet-20240229", # or "provider/model" for other providers (openai/gpt-4o-mini)\n    max_tokens=1000,\n    messages=[{"role": "user", "content": "Hello!"}]\n)'),typescript:'import Anthropic from "@anthropic-ai/sdk";\n\nconst anthropic = new Anthropic({\n  baseURL: "'.concat(e,'/anthropic",\n  apiKey: "dummy-api-key", // Handled by Bifrost\n});\n\nconst response = await anthropic.messages.create({\n  model: "claude-3-sonnet-20240229", // or "provider/model" for other providers (openai/gpt-4o-mini)\n  max_tokens: 1000,\n  messages: [{ role: "user", content: "Hello!" }],\n});')},genai:{python:'from google import genai\nfrom google.genai.types import HttpOptions\n\nclient = genai.Client(\n    api_key="dummy-api-key", # Handled by Bifrost\n    http_options=HttpOptions(base_url="'.concat(e,'/genai")\n)\n\nresponse = client.models.generate_content(\n    model="gemini-2.5-pro", # or "provider/model" for other providers (openai/gpt-4o-mini)\n    contents="Hello!"\n)'),typescript:'import { GoogleGenerativeAI } from "@google/generative-ai";\n\nconst genAI = new GoogleGenerativeAI("dummy-api-key", { // Handled by Bifrost\n  baseUrl: "'.concat(e,'/genai",\n});\n\nconst model = genAI.getGenerativeModel({ model: "gemini-2.5-pro" }); // or "provider/model" for other providers (openai/gpt-4o-mini)\nconst response = await model.generateContent("Hello!");')},litellm:{python:'import litellm\n\nlitellm.api_base = "'.concat(e,'/litellm"\n\nresponse = litellm.completion(\n    model="openai/gpt-4o-mini",\n    messages=[{"role": "user", "content": "Hello!"}]\n)'),typescript:'import { completion } from "litellm";\n\nconst response = await completion({\n  model: "openai/gpt-4o-mini",\n  messages: [{ role: "user", content: "Hello!" }],\n  api_base: "'.concat(e,'/litellm",\n});')}}}},[]);return(0,n.jsxs)("div",{className:"flex w-full flex-col items-center justify-center space-y-8",children:[s&&(0,n.jsxs)(j.Fc,{children:[(0,n.jsx)(x.A,{className:"h-4 w-4"}),(0,n.jsx)(j.TN,{children:s})]}),(0,n.jsxs)("div",{className:"w-full space-y-6",children:[(0,n.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-lg font-semibold",children:"Integration under 60 seconds"}),(0,n.jsx)("p",{className:"text-muted-foreground text-sm",children:"Send your first request to get started"})]}),(0,n.jsx)("div",{className:"ml-auto",children:t&&(0,n.jsxs)("div",{className:"inline-flex items-center rounded-full border border-green-200 bg-green-50 px-3 py-1 text-xs font-medium text-green-700 sm:px-4 sm:text-sm",children:[(0,n.jsxs)("span",{className:"relative mr-2 flex h-2 w-2 sm:mr-3",children:[(0,n.jsx)("span",{className:"absolute inline-flex h-full w-full animate-ping rounded-full bg-green-500 opacity-75"}),(0,n.jsx)("span",{className:"relative inline-flex h-2 w-2 rounded-full bg-green-600"})]}),(0,n.jsx)("span",{children:"Listening for logs..."})]})})]}),(0,n.jsxs)(m.tU,{defaultValue:"curl",className:"w-full rounded-lg border",children:[(0,n.jsxs)(m.j7,{className:"grid h-10 w-full grid-cols-5 rounded-b-none rounded-t-lg",children:[(0,n.jsx)(m.Xi,{value:"curl",children:"cURL"}),(0,n.jsx)(m.Xi,{value:"openai",children:"OpenAI SDK"}),(0,n.jsx)(m.Xi,{value:"anthropic",children:"Anthropic SDK"}),(0,n.jsx)(m.Xi,{value:"genai",children:"Google GenAI SDK"}),(0,n.jsx)(m.Xi,{value:"litellm",children:"LiteLLM SDK"})]}),(0,n.jsx)(m.av,{value:"curl",className:"px-4",children:(0,n.jsx)(k,{code:o.curl,language:"bash",readonly:!1})}),(0,n.jsx)(m.av,{value:"openai",className:"px-4",children:(0,n.jsx)(k,{code:o.sdk.openai[a],language:a,onLanguageChange:e=>l(e),showLanguageSelect:!0})}),(0,n.jsx)(m.av,{value:"anthropic",className:"px-4",children:(0,n.jsx)(k,{code:o.sdk.anthropic[a],language:a,onLanguageChange:e=>l(e),showLanguageSelect:!0})}),(0,n.jsx)(m.av,{value:"genai",className:"px-4",children:(0,n.jsx)(k,{code:o.sdk.genai[a],language:a,onLanguageChange:e=>l(e),showLanguageSelect:!0})}),(0,n.jsx)(m.av,{value:"litellm",className:"px-4",children:(0,n.jsx)(k,{code:o.sdk.litellm[a],language:a,onLanguageChange:e=>l(e),showLanguageSelect:!0})})]})]})]})}var C=s(1085),A=s(6561),L=s(7434),H=s(5868);function z(e){if(null===e.value)return null;let t=e.orientation||"vertical";return(0,n.jsx)("div",{className:(0,v.cn)("items-top flex flex-col gap-2",{["".concat(e.className)]:void 0!==e.className,"items-start":"left"===e.align||void 0===e.align,"items-end":"right"===e.align}),children:(0,n.jsxs)("div",{className:e.containerClassName,children:[""!==e.label&&(0,n.jsx)("div",{className:"text-muted-foreground flex shrink-0 flex-row items-center gap-2 text-xs font-medium",children:e.label.toUpperCase()}),(0,n.jsx)("div",{className:(0,v.cn)("text-md flex whitespace-nowrap text-xs font-medium transition-transform delay-75",{"w-full flex-col items-center gap-2":"horizontal"===t,"flex-row items-start gap-2":"vertical"===t,["".concat(e.valueClassName)]:void 0!==e.valueClassName,"text-end":"right"===e.align}),children:e.value})]})})}var T=s(2940),M=s.n(T),B=s(6037);let E=e=>{try{return JSON.parse(e),!0}catch(e){return!1}},O=e=>{try{return JSON.parse(e)}catch(t){return e}};function F(e){let{message:t}=e;return(0,n.jsxs)("div",{className:"w-full rounded-sm border",children:[(0,n.jsx)("div",{className:"border-b px-6 py-2 text-sm font-medium capitalize",children:t.role}),"string"==typeof t.content&&t.content.length>0&&!E(t.content)?(0,n.jsx)("div",{className:"px-6 py-2 font-mono text-xs",children:t.content}):t.content.length>0&&(0,n.jsx)(w,{className:"z-0 w-full",shouldAdjustInitialHeight:!0,maxHeight:250,wrap:!0,code:JSON.stringify(O(t.content),null,2),lang:"json",readonly:!0,options:{scrollBeyondLastLine:!1,collapsibleBlocks:!0,lineNumbers:"off",alwaysConsumeMouseWheel:!1}}),t.tool_calls&&t.tool_calls.length>0&&(0,n.jsx)("div",{className:"border-b last:border-b-0",children:(0,n.jsx)(w,{className:"z-0 w-full",shouldAdjustInitialHeight:!0,maxHeight:150,wrap:!0,code:JSON.stringify(O(t.tool_calls),null,2),lang:"json",readonly:!0,options:{scrollBeyondLastLine:!1,collapsibleBlocks:!0,lineNumbers:"off",alwaysConsumeMouseWheel:!1}})})]})}function I(e){var t,s,a,o,r,c,d,u;let{log:m,open:p,onOpenChange:h}=e;if(!m)return null;m.latency;let x=m.token_usage;x&&(x.completion_tokens,x.total_tokens),x&&(x.prompt_tokens,x.completion_tokens,x.prompt_tokens,x.completion_tokens);let g=null;if(null==(t=m.params)?void 0:t.tools)try{g=JSON.stringify(m.params.tools,null,2)}catch(e){}let f=null;if(null==(s=m.params)?void 0:s.tool_choice)try{f=JSON.stringify(m.params.tool_choice,null,2)}catch(e){}return(0,n.jsx)(C.cj,{open:p,onOpenChange:h,children:(0,n.jsxs)(C.h,{className:"flex w-full flex-col overflow-x-hidden p-8 sm:max-w-2xl",children:[(0,n.jsx)(C.Fm,{className:"px-0",children:(0,n.jsxs)(C.qp,{className:"flex w-fit items-center gap-2 font-medium",children:["success"===m.status&&(0,n.jsxs)("p",{className:"text-md max-w-full truncate",children:["Request ID: ",m.id]}),(0,n.jsx)(l.E,{variant:"outline",className:i.Ez[m.status],children:m.status})]})}),(0,n.jsxs)("div",{className:"space-y-4 rounded-sm border px-6 py-4",children:[(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)(q,{title:"Timings",icon:(0,n.jsx)(A.A,{className:"h-5 w-5 text-gray-600"})}),(0,n.jsxs)("div",{className:"grid w-full grid-cols-3 items-center justify-between gap-4",children:[(0,n.jsx)(z,{className:"w-full",label:"Start Timestamp",value:M()(m.timestamp).format("YYYY-MM-DD HH:mm:ss A")}),(0,n.jsx)(z,{className:"w-full",label:"End Timestamp",value:M()(m.timestamp).add(m.latency||0,"ms").format("YYYY-MM-DD HH:mm:ss A")}),(0,n.jsx)(z,{className:"w-full",label:"Latency",value:isNaN(m.latency||0)?"NA":(0,n.jsxs)("div",{children:[null==(a=m.latency||0)?void 0:a.toFixed(2),"ms"]})})]})]}),(0,n.jsx)(B.W,{}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)(q,{title:"Request Details",icon:(0,n.jsx)(L.A,{className:"h-5 w-5 text-gray-600"})}),(0,n.jsxs)("div",{className:"grid w-full grid-cols-3 items-center justify-between gap-4",children:[(0,n.jsx)(z,{className:"w-full",label:"Provider",value:i.oU[m.provider]}),(0,n.jsx)(z,{className:"w-full",label:"Model",value:m.model}),(0,n.jsx)(z,{className:"w-full",label:"Type",value:(0,n.jsx)("div",{className:"".concat(i.wf[m.object]," rounded-md px-3 py-1"),children:i.tJ[m.object]})}),m.params&&Object.keys(m.params).length>0&&Object.entries(m.params).filter(e=>{let[t]=e;return"tools"!==t}).filter(e=>{let[t,s]=e;return"boolean"==typeof s||"number"==typeof s||"string"==typeof s}).map(e=>{let[t,s]=e;return(0,n.jsx)(z,{className:"w-full",label:t,value:s},t)})]})]}),"success"===m.status&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(B.W,{}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)(q,{title:"Tokens",icon:(0,n.jsx)(H.A,{className:"h-5 w-5 text-gray-600"})}),(0,n.jsxs)("div",{className:"grid w-full grid-cols-3 items-center justify-between gap-4",children:[(0,n.jsx)(z,{className:"w-full",label:"Prompt Tokens",value:(null==(o=m.token_usage)?void 0:o.prompt_tokens)||"-"}),(0,n.jsx)(z,{className:"w-full",label:"Completion Tokens",value:(null==(r=m.token_usage)?void 0:r.completion_tokens)||"-"}),(0,n.jsx)(z,{className:"w-full",label:"Total Tokens",value:(null==(c=m.token_usage)?void 0:c.total_tokens)||"-"})]})]})]})]}),f&&(0,n.jsxs)("div",{className:"w-full rounded-sm border",children:[(0,n.jsx)("div",{className:"border-b px-6 py-2 text-sm font-medium",children:"Tool Choice"}),(0,n.jsx)(w,{className:"z-0 w-full",shouldAdjustInitialHeight:!0,maxHeight:450,wrap:!0,code:f,lang:"json",readonly:!0,options:{scrollBeyondLastLine:!1,collapsibleBlocks:!0,lineNumbers:"off",alwaysConsumeMouseWheel:!1}})]}),g&&(0,n.jsxs)("div",{className:"w-full rounded-sm border",children:[(0,n.jsx)("div",{className:"border-b px-6 py-2 text-sm font-medium",children:"Tools"}),(0,n.jsx)(w,{className:"z-0 w-full",shouldAdjustInitialHeight:!0,maxHeight:450,wrap:!0,code:g,lang:"json",readonly:!0,options:{scrollBeyondLastLine:!1,collapsibleBlocks:!0,lineNumbers:"off",alwaysConsumeMouseWheel:!1}})]}),(0,n.jsx)("div",{className:"mt-4 w-full text-center text-sm font-medium",children:"Conversation History"}),m.input_history&&m.input_history.map((e,t)=>(0,n.jsx)(F,{message:e},t)),"processing"!==m.status&&(0,n.jsxs)(n.Fragment,{children:[m.output_message&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"mt-4 w-full text-center text-sm font-medium",children:"Response"}),(0,n.jsx)(F,{message:m.output_message})]}),(null==(d=m.error_details)?void 0:d.error.message)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"mt-4 w-full text-center text-sm font-medium",children:"Error"}),(0,n.jsxs)("div",{className:"w-full rounded-sm border",children:[(0,n.jsx)("div",{className:"border-b px-6 py-2 text-sm font-medium",children:"Error"}),(0,n.jsx)("div",{className:"px-6 py-2 font-mono text-xs",children:m.error_details.error.message})]})]})]})]})})}let q=e=>{let{title:t,icon:s}=e;return(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsx)("div",{className:"text-sm font-medium",children:t})})};var R=s(6268),W=s(1032),D=s(8524),P=s(3904),K=s(4416),G=s(2355),J=s(3052),U=s(9852),Y=s(7924),X=s(5196),$=s(7740);function V(e){let{className:t,...s}=e;return(0,n.jsx)($.uB,{"data-slot":"command",className:(0,v.cn)("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",t),...s})}function Z(e){let{className:t,...s}=e;return(0,n.jsxs)("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[(0,n.jsx)(Y.A,{className:"size-4 shrink-0 opacity-50"}),(0,n.jsx)($.uB.Input,{"data-slot":"command-input",className:(0,v.cn)("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",t),...s})]})}function Q(e){let{className:t,...s}=e;return(0,n.jsx)($.uB.List,{"data-slot":"command-list",className:(0,v.cn)("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",t),...s})}function ee(e){let{...t}=e;return(0,n.jsx)($.uB.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...t})}function et(e){let{className:t,...s}=e;return(0,n.jsx)($.uB.Group,{"data-slot":"command-group",className:(0,v.cn)("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",t),...s})}function es(e){let{className:t,...s}=e;return(0,n.jsx)($.uB.Item,{"data-slot":"command-item",className:(0,v.cn)("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...s})}s(9840);var en=s(547);function ea(e){let{...t}=e;return(0,n.jsx)(en.bL,{"data-slot":"popover",...t})}function el(e){let{...t}=e;return(0,n.jsx)(en.l9,{"data-slot":"popover-trigger",...t})}function eo(e){let{className:t,align:s="center",sideOffset:a=4,...l}=e;return(0,n.jsx)(en.ZL,{children:(0,n.jsx)(en.UC,{"data-slot":"popover-content",align:s,sideOffset:a,className:(0,v.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",t),...l})})}let er={Status:i.f,Providers:i.xq,Type:i.mG};function ei(e){let{filters:t,onFiltersChange:s}=e,[a,l]=(0,g.useState)(!1),[r,c]=(0,g.useState)(t.content_search||""),d=(0,g.useRef)(void 0);(0,g.useEffect)(()=>()=>{d.current&&clearTimeout(d.current)},[]);let u=(0,g.useCallback)(e=>{c(e),d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{s({...t,content_search:e})},500)},[t,s]),m=(e,n)=>{let a={Status:"status",Providers:"providers",Type:"objects"}[e],l=t[a]||[],o=l.includes(n)?l.filter(e=>e!==n):[...l,n];s({...t,[a]:o})},p=(e,s)=>{let n=t[({Status:"status",Providers:"providers",Type:"objects"})[e]];return Array.isArray(n)&&n.includes(s)},h=()=>Object.entries(t).reduce((e,t)=>{let[s,n]=t;return Array.isArray(n)?e+n.length:e+ +!!n},0);return(0,n.jsxs)("div",{className:"flex items-center justify-between space-x-4",children:[(0,n.jsxs)("div",{className:"flex flex-1 items-center gap-2",children:[(0,n.jsx)(Y.A,{className:"size-5"}),(0,n.jsx)(U.p,{type:"text",className:"border-none shadow-none outline-none focus-visible:ring-0",placeholder:"Search logs",value:r,onChange:e=>u(e.target.value)})]}),(0,n.jsxs)(ea,{open:a,onOpenChange:l,children:[(0,n.jsx)(el,{asChild:!0,children:(0,n.jsxs)(o.$,{variant:"outline",size:"sm",className:"h-9",children:["Filters",h()>0&&(0,n.jsx)("span",{className:"bg-primary/10 flex h-6 w-6 items-center justify-center rounded-full text-xs font-normal",children:h()})]})}),(0,n.jsx)(eo,{className:"w-[200px] p-0",align:"end",children:(0,n.jsxs)(V,{children:[(0,n.jsx)(Z,{placeholder:"Search filters..."}),(0,n.jsxs)(Q,{children:[(0,n.jsx)(ee,{children:"No filters found."}),Object.entries(er).map(e=>{let[t,s]=e;return(0,n.jsx)(et,{heading:t,children:s.map(e=>{let s=p(t,e);return(0,n.jsxs)(es,{onSelect:()=>m(t,e),children:[(0,n.jsx)("div",{className:(0,v.cn)("border-primary mr-2 flex h-4 w-4 items-center justify-center rounded-sm border",s?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:(0,n.jsx)(X.A,{className:"text-primary-foreground size-3"})}),(0,n.jsx)("span",{className:"lowercase",children:"Type"===t?i.tJ[e]:e})]},e)})},t)})]})]})})]})]})}function ec(e){let{columns:t,data:s,totalItems:a,loading:l=!1,filters:r,pagination:i,onFiltersChange:c,onPaginationChange:d,onRowClick:u,isSocketConnected:m}=e,[p,h]=(0,g.useState)([{id:i.sort_by,desc:"desc"===i.order}]),x=(0,R.N4)({data:s,columns:t,getCoreRowModel:(0,W.HT)(),manualPagination:!0,manualSorting:!0,manualFiltering:!0,pageCount:Math.ceil(a/i.limit),state:{sorting:p},onSortingChange:e=>{let t="function"==typeof e?e(p):e;if(h(t),t.length>0){let{id:e,desc:s}=t[0];d({...i,sort_by:e,order:s?"desc":"asc"})}}}),f=Math.floor(i.offset/i.limit)+1,j=Math.ceil(a/i.limit),v=i.offset+1,y=Math.min(i.offset+i.limit,a),N=e=>{let t=(e-1)*i.limit;d({...i,offset:t})};return(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(ei,{filters:r,onFiltersChange:c}),(0,n.jsx)("div",{className:"rounded-md border",children:(0,n.jsxs)(D.XI,{children:[(0,n.jsx)(D.A0,{children:x.getHeaderGroups().map(e=>(0,n.jsx)(D.Hj,{children:e.headers.map(e=>(0,n.jsx)(D.nd,{children:e.isPlaceholder?null:(0,R.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,n.jsx)(D.BF,{children:l?(0,n.jsx)(D.Hj,{children:(0,n.jsx)(D.nA,{colSpan:t.length,className:"h-24 text-center",children:(0,n.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,n.jsx)(P.A,{className:"h-4 w-4 animate-spin"}),"Loading logs..."]})})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(D.Hj,{className:"hover:bg-transparent",children:(0,n.jsx)(D.nA,{colSpan:t.length,className:"h-12 text-center",children:(0,n.jsx)("div",{className:"flex items-center justify-center gap-2",children:m?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(P.A,{className:"h-4 w-4 animate-spin"}),"Listening for logs..."]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(K.A,{className:"h-4 w-4"}),"Not connected to socket, please refresh the page."]})})})}),x.getRowModel().rows.length?x.getRowModel().rows.map(e=>(0,n.jsx)(D.Hj,{className:"hover:bg-muted/50 h-12 cursor-pointer",onClick:()=>null==u?void 0:u(e.original),children:e.getVisibleCells().map(e=>(0,n.jsx)(D.nA,{children:(0,R.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,n.jsx)(D.Hj,{children:(0,n.jsx)(D.nA,{colSpan:t.length,className:"h-24 text-center",children:"No results found."})})]})})]})}),(0,n.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,n.jsxs)("div",{className:"text-muted-foreground flex items-center gap-2",children:[v.toLocaleString(),"-",y.toLocaleString()," of ",a.toLocaleString()," entries"]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(o.$,{variant:"outline",size:"sm",onClick:()=>N(f-1),disabled:1===f,children:(0,n.jsx)(G.A,{className:"size-3"})}),(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)("span",{children:"Page"}),(0,n.jsx)("span",{children:f}),(0,n.jsxs)("span",{children:["of ",j]})]}),(0,n.jsx)(o.$,{variant:"outline",size:"sm",onClick:()=>N(f+1),disabled:f===j,children:(0,n.jsx)(J.A,{className:"size-3"})})]})]})]})}var ed=s(8482),eu=s(6705),em=s(1886),ep=s(741),eh=s(646),ex=s(4186),eg=s(5448),ef=s(5339);function ej(){let[e,t]=(0,g.useState)([]),[s,l]=(0,g.useState)(0),[o,r]=(0,g.useState)(null),[i,c]=(0,g.useState)(!0),[u,m]=(0,g.useState)(!1),[p,h]=(0,g.useState)(null),[x,f]=(0,g.useState)(!1),[v,y]=(0,g.useState)(null),N=(0,g.useRef)(new Map),[b,w]=(0,g.useState)({providers:[],models:[],status:[],content_search:""}),[_,k]=(0,g.useState)({limit:50,offset:0,sort_by:"timestamp",order:"desc"}),C=(0,g.useCallback)((s,n)=>{if(x&&f(!1),"create"===n){if(0===_.offset&&"timestamp"===_.sort_by&&"desc"===_.order){if(!M(s,b))return;t(e=>{if(e.some(e=>e.id===s.id))return e;let t=[s,...e];return t.length>_.limit&&t.pop(),t}),y(e=>e&&e.id===s.id?s:e),l(e=>e+1),r(e=>{if(!e)return e;let t={...e};t.total_requests+=1;let n=e.success_rate/100*e.total_requests;return t.success_rate=("success"===s.status?n+1:n)/t.total_requests*100,s.latency&&(t.average_latency=(e.average_latency*e.total_requests+s.latency)/t.total_requests),s.token_usage&&(t.total_tokens+=s.token_usage.total_tokens),t})}}else if("update"===n)if(e.some(e=>e.id===s.id))if(s.stream){let e=N.current.get(s.id);e&&clearTimeout(e);let t=setTimeout(()=>{A(s),N.current.delete(s.id)},100);N.current.set(s.id,t)}else A(s);else 0===_.offset&&"timestamp"===_.sort_by&&"desc"===_.order&&M(s,b)&&t(e=>{if(e.some(e=>e.id===s.id))return e.map(e=>e.id===s.id?s:e);let t=[s,...e];return t.length>_.limit&&t.pop(),t})},[_.offset,_.sort_by,_.order,_.limit,b,x,e]),A=(0,g.useCallback)(e=>{t(t=>t.map(t=>t.id===e.id?e:t)),y(t=>t&&t.id===e.id?e:t),("success"===e.status||"error"===e.status)&&r(t=>{if(!t)return t;let s={...t},n=t.success_rate/100*t.total_requests;return s.success_rate=("success"===e.status?n+1:n)/s.total_requests*100,e.latency&&(s.average_latency=(t.average_latency*t.total_requests+e.latency)/s.total_requests),e.token_usage&&(s.total_tokens+=e.token_usage.total_tokens),s})},[]),{isConnected:L,setMessageHandler:H}=(0,eu.h)();(0,g.useEffect)(()=>{H(C)},[C,H]),(0,g.useEffect)(()=>()=>{N.current.forEach(e=>clearTimeout(e)),N.current.clear()},[]);let z=(0,g.useCallback)(async()=>{m(!0),h(null);try{let[e,s]=await em.K.getLogs(b,_);s?(h(s),t([]),l(0)):e&&(t(e.logs||[]),l(e.stats.total_requests),r(e.stats)),i&&f(!e||0===e.stats.total_requests)}catch(e){h("Cannot fetch logs. Please check if logs are enabled in your Bifrost config."),t([]),l(0),f(!0)}finally{m(!1)}},[b,_,i]);(0,g.useEffect)(()=>{i||z()},[z,i]),(0,g.useEffect)(()=>{z(),c(!1)},[]);let T=e=>"string"==typeof e?e:Array.isArray(e)?e.reduce((e,t)=>"text"===t.type&&t.text?e+t.text:e,""):"",M=(e,t)=>{var s,n,a;if((null==(s=t.providers)?void 0:s.length)&&!t.providers.includes(e.provider)||(null==(n=t.models)?void 0:n.length)&&!t.models.includes(e.model)||(null==(a=t.status)?void 0:a.length)&&!t.status.includes(e.status)||t.start_time&&new Date(e.timestamp)<new Date(t.start_time)||t.end_time&&new Date(e.timestamp)>new Date(t.end_time)||t.min_latency&&(!e.latency||e.latency<t.min_latency)||t.max_latency&&(!e.latency||e.latency>t.max_latency)||t.min_tokens&&(!e.token_usage||e.token_usage.total_tokens<t.min_tokens)||t.max_tokens&&(!e.token_usage||e.token_usage.total_tokens>t.max_tokens))return!1;if(t.content_search){let s=t.content_search.toLowerCase();if(![...(e.input_history||[]).map(e=>T(e.content)),e.output_message?T(e.output_message.content):""].join(" ").toLowerCase().includes(s))return!1}return!0},B=(0,g.useMemo)(()=>[{title:"Total Requests",value:(null==o?void 0:o.total_requests.toLocaleString())||"-",icon:(0,n.jsx)(ep.A,{className:"size-4"})},{title:"Success Rate",value:o?"".concat(o.success_rate.toFixed(2),"%"):"-",icon:(0,n.jsx)(eh.A,{className:"size-4"})},{title:"Avg Latency",value:o?"".concat(o.average_latency.toFixed(2),"ms"):"-",icon:(0,n.jsx)(ex.A,{className:"size-4"})},{title:"Total Tokens",value:(null==o?void 0:o.total_tokens.toLocaleString())||"-",icon:(0,n.jsx)(eg.A,{className:"size-4"})}],[o]),E=d();return(0,n.jsx)("div",{className:"bg-background",children:i?(0,n.jsx)(a.A,{}):x?(0,n.jsx)(S,{isSocketConnected:L,error:p}):(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"mb-2 text-3xl font-bold",children:"Request Logs"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"Monitor and analyze all API requests and responses"})]}),(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-4",children:B.map(e=>(0,n.jsx)(ed.Zp,{className:"py-4",children:(0,n.jsx)(ed.Wu,{className:"flex items-center justify-between px-4",children:(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-muted-foreground text-xs",children:e.title}),(0,n.jsx)("div",{className:"text-2xl font-bold",children:e.value})]})})},e.title))}),p&&(0,n.jsxs)(j.Fc,{variant:"destructive",children:[(0,n.jsx)(ef.A,{className:"h-4 w-4"}),(0,n.jsx)(j.TN,{children:p})]}),(0,n.jsx)(ec,{columns:E,data:e,totalItems:s,loading:u,filters:b,pagination:_,onFiltersChange:w,onPaginationChange:k,onRowClick:y,isSocketConnected:L})]}),(0,n.jsx)(I,{log:v,open:null!==v,onOpenChange:e=>!e&&y(null)})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[586,106,189,944,231,412,62,822,105,915,830,441,684,358],()=>t(2815)),_N_E=e.O()}]);