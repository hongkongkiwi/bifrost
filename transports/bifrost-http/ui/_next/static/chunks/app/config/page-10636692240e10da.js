(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[653],{1243:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(9946).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},1886:(e,t,r)=>{"use strict";r.d(t,{K:()=>l});var s=r(9362),a=r(3464),n=r(2379);class i{getErrorMessage(e){if((0,s.F0)(e)&&e.response){let t=e.response.data;if(t.error&&t.error.message)return t.error.message}return e instanceof Error&&e.message||"An unexpected error occurred."}async getLogs(e,t){try{let r={limit:t.limit,offset:t.offset,sort_by:t.sort_by,order:t.order};return e.providers&&e.providers.length>0&&(r.providers=e.providers.join(",")),e.models&&e.models.length>0&&(r.models=e.models.join(",")),e.status&&e.status.length>0&&(r.status=e.status.join(",")),e.objects&&e.objects.length>0&&(r.objects=e.objects.join(",")),e.start_time&&(r.start_time=e.start_time),e.end_time&&(r.end_time=e.end_time),e.min_latency&&(r.min_latency=e.min_latency),e.max_latency&&(r.max_latency=e.max_latency),e.min_tokens&&(r.min_tokens=e.min_tokens),e.max_tokens&&(r.max_tokens=e.max_tokens),e.content_search&&(r.content_search=e.content_search),[(await this.client.get("/logs",{params:r})).data,null]}catch(e){return[null,this.getErrorMessage(e)]}}async getDroppedRequests(){try{return[(await this.client.get("/logs/dropped")).data,null]}catch(e){return[null,this.getErrorMessage(e)]}}async getProviders(){try{return[(await this.client.get("/providers")).data,null]}catch(e){return[null,this.getErrorMessage(e)]}}async getProvider(e){try{return[(await this.client.get("/providers/".concat(e))).data,null]}catch(e){return[null,this.getErrorMessage(e)]}}async createProvider(e){try{return[(await this.client.post("/providers",e)).data,null]}catch(e){return[null,this.getErrorMessage(e)]}}async updateProvider(e,t){try{return[(await this.client.put("/providers/".concat(e),t)).data,null]}catch(e){return[null,this.getErrorMessage(e)]}}async deleteProvider(e){try{return[(await this.client.delete("/providers/".concat(e))).data,null]}catch(e){return[null,this.getErrorMessage(e)]}}async getMCPClients(){try{return[(await this.client.get("/mcp/clients")).data,null]}catch(e){return[null,this.getErrorMessage(e)]}}async createMCPClient(e){try{return await this.client.post("/mcp/client",e),[null,null]}catch(e){return[null,this.getErrorMessage(e)]}}async updateMCPClient(e,t){try{return await this.client.put("/mcp/client/".concat(e),t),[null,null]}catch(e){return[null,this.getErrorMessage(e)]}}async deleteMCPClient(e){try{return await this.client.delete("/mcp/client/".concat(e)),[null,null]}catch(e){return[null,this.getErrorMessage(e)]}}async reconnectMCPClient(e){try{return await this.client.post("/mcp/client/".concat(e,"/reconnect")),[null,null]}catch(e){return[null,this.getErrorMessage(e)]}}async getCoreConfig(){try{return[(await this.client.get("/config")).data,null]}catch(e){return[null,this.getErrorMessage(e)]}}async updateCoreConfig(e){try{return await this.client.put("/config",e),[null,null]}catch(e){return[null,this.getErrorMessage(e)]}}constructor(){let e=(0,n.hY)();this.client=a.A.create({baseURL:e,headers:{"Content-Type":"application/json"}})}}let l=new i},2379:(e,t,r)=>{"use strict";function s(){{let e="https:"===window.location.protocol?"https:":"http:",t="https:"===window.location.protocol?"wss:":"ws:";return{port:window.location.port||("https:"===window.location.protocol?"443":"80"),isDevelopment:!1,baseUrl:"".concat(e,"//").concat(window.location.host),wsUrl:"".concat(t,"//").concat(window.location.host),host:window.location.host}}}function a(){let e=s();return e.isDevelopment?"".concat(e.baseUrl,"/api"):"/api"}function n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=s(),r=e.startsWith("/")?e:"/".concat(e);return"".concat(t.wsUrl).concat(r)}function i(){return s().baseUrl}r.d(t,{$0:()=>n,XO:()=>i,hY:()=>a}),r(9509)},3557:(e,t,r)=>{"use strict";r.d(t,{Ob:()=>a,w8:()=>s});let s=e=>e.split(",").map(e=>e.trim()).filter(e=>e.length>0),a=(e,t)=>(null==e?void 0:e.length)===(null==t?void 0:t.length)&&(null==e?void 0:e.every((e,r)=>e===t[r]))},3999:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var s=r(2596),a=r(9688);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,s.$)(t))}},4527:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>B});var s=r(5155),a=r(2115),n=r(8482),i=r(5185),l=r(6101),o=r(6081),c=r(5845),d=r(5503),u=r(1275),p=r(3655),h="Switch",[g,m]=(0,o.A)(h),[f,x]=g(h),b=a.forwardRef((e,t)=>{let{__scopeSwitch:r,name:n,checked:o,defaultChecked:d,required:u,disabled:g,value:m="on",onCheckedChange:x,form:b,...v}=e,[y,_]=a.useState(null),N=(0,l.s)(t,e=>_(e)),k=a.useRef(!1),C=!y||b||!!y.closest("form"),[E,M]=(0,c.i)({prop:o,defaultProp:null!=d&&d,onChange:x,caller:h});return(0,s.jsxs)(f,{scope:r,checked:E,disabled:g,children:[(0,s.jsx)(p.sG.button,{type:"button",role:"switch","aria-checked":E,"aria-required":u,"data-state":j(E),"data-disabled":g?"":void 0,disabled:g,value:m,...v,ref:N,onClick:(0,i.m)(e.onClick,e=>{M(e=>!e),C&&(k.current=e.isPropagationStopped(),k.current||e.stopPropagation())})}),C&&(0,s.jsx)(w,{control:y,bubbles:!k.current,name:n,value:m,checked:E,required:u,disabled:g,form:b,style:{transform:"translateX(-100%)"}})]})});b.displayName=h;var v="SwitchThumb",y=a.forwardRef((e,t)=>{let{__scopeSwitch:r,...a}=e,n=x(v,r);return(0,s.jsx)(p.sG.span,{"data-state":j(n.checked),"data-disabled":n.disabled?"":void 0,...a,ref:t})});y.displayName=v;var w=a.forwardRef((e,t)=>{let{__scopeSwitch:r,control:n,checked:i,bubbles:o=!0,...c}=e,p=a.useRef(null),h=(0,l.s)(p,t),g=(0,d.Z)(i),m=(0,u.X)(n);return a.useEffect(()=>{let e=p.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(g!==i&&t){let r=new Event("click",{bubbles:o});t.call(e,i),e.dispatchEvent(r)}},[g,i,o]),(0,s.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i,...c,tabIndex:-1,ref:h,style:{...c.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function j(e){return e?"checked":"unchecked"}w.displayName="SwitchBubbleInput";var _=r(3999);let N=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(b,{className:(0,_.cn)("peer focus-visible:ring-ring focus-visible:ring-offset-background data-[state=checked]:bg-primary data-[state=unchecked]:bg-input inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50",r),...a,ref:t,children:(0,s.jsx)(y,{className:(0,_.cn)("bg-background pointer-events-none block h-5 w-5 rounded-full shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});N.displayName=b.displayName;var k=r(1154),C=r(1243),E=r(1886),M=r(6671),P="horizontal",T=["horizontal","vertical"],z=a.forwardRef((e,t)=>{var r;let{decorative:a,orientation:n=P,...i}=e,l=(r=n,T.includes(r))?n:P;return(0,s.jsx)(p.sG.div,{"data-orientation":l,...a?{role:"none"}:{"aria-orientation":"vertical"===l?l:void 0,role:"separator"},...i,ref:t})});z.displayName="Separator";var q=r(9026),R=r(9852),S=r(9474),A=r(3557);function I(){let[e,t]=(0,a.useState)({drop_excess_requests:!1,initial_pool_size:300,enable_logging:!0}),[r,i]=(0,a.useState)(0),[l,o]=(0,a.useState)(!0),[c,d]=(0,a.useState)({initial_pool_size:"300",prometheus_labels:""});(0,a.useEffect)(()=>{(async()=>{let[e,t]=await E.K.getDroppedRequests();t?M.o.error(t):e&&i(e.dropped_requests)})()},[]);let u=(0,a.useRef)(void 0),p=(0,a.useRef)(void 0);(0,a.useEffect)(()=>{(async()=>{let[e,r]=await E.K.getCoreConfig();if(r)M.o.error(r);else if(e){var s;t(e),d({initial_pool_size:(null==(s=e.initial_pool_size)?void 0:s.toString())||"300",prometheus_labels:e.prometheus_labels||""})}o(!1)})()},[]);let h=(0,a.useCallback)(async(r,s)=>{let a={...e,[r]:s};t(a);let[,n]=await E.K.updateCoreConfig(a);n?M.o.error(n):M.o.success("Core setting updated successfully.")},[e]),g=async(e,t)=>{await h(e,t)},m=(0,a.useCallback)(e=>{d(t=>({...t,initial_pool_size:e})),u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{let t=Number.parseInt(e);!isNaN(t)&&t>0&&h("initial_pool_size",t)},1e3)},[h]),f=(0,a.useCallback)(e=>{d(t=>({...t,prometheus_labels:e})),p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{h("prometheus_labels",(0,A.w8)(e))},1e3)},[h]);return((0,a.useEffect)(()=>()=>{u.current&&clearTimeout(u.current),p.current&&clearTimeout(p.current)},[]),l)?(0,s.jsx)("div",{className:"flex h-64 items-center justify-center",children:(0,s.jsx)(k.A,{className:"h-4 w-4 animate-spin"})}):(0,s.jsxs)("div",{children:[(0,s.jsxs)(n.aR,{className:"mb-4 px-0",children:[(0,s.jsx)(n.ZB,{className:"flex items-center gap-2",children:"Core System Settings"}),(0,s.jsx)(n.BT,{children:"Configure core Bifrost settings like request handling, pool sizes, and system behavior."})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between space-x-2 rounded-lg border p-4",children:[(0,s.jsxs)("div",{className:"space-y-0.5",children:[(0,s.jsx)("label",{htmlFor:"drop-excess-requests",className:"text-sm font-medium",children:"Drop Excess Requests"}),(0,s.jsx)("p",{className:"text-muted-foreground text-sm",children:"If enabled, Bifrost will drop requests that exceed pool capacity."})]}),(0,s.jsx)(N,{id:"drop-excess-requests",checked:e.drop_excess_requests,onCheckedChange:e=>g("drop_excess_requests",e)})]}),(0,s.jsx)(z,{}),(0,s.jsxs)(q.Fc,{children:[(0,s.jsx)(C.A,{className:"h-4 w-4"}),(0,s.jsx)(q.TN,{children:"The settings below require a Bifrost service restart to take effect. Current connections will continue with existing settings until restart."})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between space-x-2 rounded-lg border p-4",children:[(0,s.jsxs)("div",{className:"space-y-0.5",children:[(0,s.jsx)("label",{htmlFor:"initial-pool-size",className:"text-sm font-medium",children:"Initial Pool Size"}),(0,s.jsx)("p",{className:"text-muted-foreground text-sm",children:"The initial connection pool size."})]}),(0,s.jsx)(R.p,{id:"initial-pool-size",type:"number",className:"w-24",value:c.initial_pool_size,onChange:e=>m(e.target.value),min:"1"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between space-x-2 rounded-lg border p-4",children:[(0,s.jsxs)("div",{className:"space-y-0.5",children:[(0,s.jsx)("label",{htmlFor:"enable-logging",className:"text-sm font-medium",children:"Enable Logs"}),(0,s.jsx)("p",{className:"text-muted-foreground text-sm",children:"Enable logging of requests and responses to a SQLite database. This can add 40-60mb of overhead to the system memory."})]}),(0,s.jsx)(N,{id:"enable-logging",checked:e.enable_logging,onCheckedChange:e=>g("enable_logging",e)})]}),(0,s.jsxs)("div",{className:"space-y-2 rounded-lg border p-4",children:[(0,s.jsxs)("div",{className:"space-y-0.5",children:[(0,s.jsx)("label",{htmlFor:"prometheus-labels",className:"text-sm font-medium",children:"Prometheus Labels"}),(0,s.jsx)("p",{className:"text-muted-foreground text-sm",children:"Comma-separated list of custom labels to add to the Prometheus metrics."})]}),(0,s.jsx)(S.T,{id:"prometheus-labels",className:"h-24",placeholder:"teamId, projectId, environment",value:c.prometheus_labels,onChange:e=>f(e.target.value)})]})]})]})}function B(){return(0,s.jsxs)("div",{className:"bg-background space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Configuration"}),(0,s.jsx)("p",{className:"text-muted-foreground mt-2",children:"Configure AI providers, API keys, and system settings for your Bifrost instance."})]}),(0,s.jsx)(I,{})]})}},8482:(e,t,r)=>{"use strict";r.d(t,{BT:()=>o,Wu:()=>c,ZB:()=>l,Zp:()=>n,aR:()=>i});var s=r(5155);r(2115);var a=r(3999);function n(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...r})}function i(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...r})}function l(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",t),...r})}function o(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",t),...r})}function c(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",t),...r})}},8835:(e,t,r)=>{Promise.resolve().then(r.bind(r,4527))},9026:(e,t,r)=>{"use strict";r.d(t,{Fc:()=>l,TN:()=>o});var s=r(5155);r(2115);var a=r(2085),n=r(3999);let i=(0,a.F)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:r,...a}=e;return(0,s.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,n.cn)(i({variant:r}),t),...a})}function o(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"alert-description",className:(0,n.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...r})}},9474:(e,t,r)=>{"use strict";r.d(t,{T:()=>n});var s=r(5155);r(2115);var a=r(3999);function n(e){let{className:t,...r}=e;return(0,s.jsx)("textarea",{"data-slot":"textarea",className:(0,a.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...r})}},9852:(e,t,r)=>{"use strict";r.d(t,{p:()=>i});var s=r(5155),a=r(2115),n=r(3999);let i=a.forwardRef((e,t)=>{let{className:r,type:a,...i}=e;return(0,s.jsx)("input",{type:a,ref:t,"data-slot":"input",className:(0,n.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",r),...i})});i.displayName="Input"}},e=>{var t=t=>e(e.s=t);e.O(0,[106,189,412,441,684,358],()=>t(8835)),_N_E=e.O()}]);